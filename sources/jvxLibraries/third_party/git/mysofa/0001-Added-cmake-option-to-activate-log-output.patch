From ce811166844bbd5feff06aa77400eb19068d266f Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Hauke=20Kr=C3=BCger?= <hk@binauricsaudio.com>
Date: Fri, 4 Apr 2025 16:41:13 +0200
Subject: [PATCH] Added cmake option to activate log output

---
 CMakeLists.txt     | 1 +
 src/CMakeLists.txt | 3 +++
 2 files changed, 4 insertions(+)

diff --git a/CMakeLists.txt b/CMakeLists.txt
index c0ce279..df65175 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -10,6 +10,7 @@ option(BUILD_SHARED_LIBS "Build shared library" ON)
 option(BUILD_STATIC_LIBS "Build static library" ON)
 option(CODE_COVERAGE "Enable coverage reporting" OFF)
 option(ADDRESS_SANITIZE "Enable address sanitizer" OFF)
+option(VDEBUG_LOGGING "Enable vdebug debugging" ON)
 
 set(CPACK_PACKAGE_DESCRIPTION "SOFA file reader for better HRTFs")
 set(CPACK_PACKAGE_DESCRIPTION_SUMMARY
diff --git a/src/CMakeLists.txt b/src/CMakeLists.txt
index 109895e..a0eccb8 100644
--- a/src/CMakeLists.txt
+++ b/src/CMakeLists.txt
@@ -96,6 +96,9 @@ install(TARGETS mysofa-static ARCHIVE DESTINATION ${CMAKE_INSTALL_LIBDIR})
       target_link_libraries(mysofa-static LINK_PUBLIC gcov --coverage)
     endif()
   endif()
+  if(VDEBUG_LOGGING)
+	target_compile_definitions(mysofa-static PRIVATE "VDEBUG")
+  endif()
 endif()
 
 if(BUILD_SHARED_LIBS)
-- 
2.47.1.windows.1

