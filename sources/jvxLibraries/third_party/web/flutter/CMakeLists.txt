set(PROJECT_NAME flutter)
include(${JVX_CMAKE_DIR}/common_local_lib_head.cmake)

# set(JVX_FLUTTER_VERSION "3.7.5")
set(JVX_FLUTTER_VERSION "3.27.1")

if(NOT EXISTS ${CMAKE_CURRENT_SOURCE_DIR}/flutter-${JVX_FLUTTER_VERSION})
	message("flutter sub project not available. Starting script to download it.") 
	message("Make sure you will add ${CMAKE_CURRENT_SOURCE_DIR}/flutter-${JVX_FLUTTER_VERSION}/bin to the PATH environment variable!") 
	message("Make sure you will set FLUTTER_SDK_PATH=${CMAKE_CURRENT_SOURCE_DIR}/flutter-${JVX_FLUTTER_VERSION} in your compile script!") 
	if(${JVX_OS} MATCHES "windows")
		execute_process(COMMAND ${CMAKE_COMMAND} -E env JVX_FLUTTER_VERSION=${JVX_FLUTTER_VERSION} ${mysh} -c "cd ${CMAKE_CURRENT_SOURCE_DIR} ; ./prepareModules-win.sh; exit")
	elseif(${JVX_OS} MATCHES "linux")
		execute_process(COMMAND ${CMAKE_COMMAND} -E env JVX_FLUTTER_VERSION=${JVX_FLUTTER_VERSION} ${mysh} -c "cd ${CMAKE_CURRENT_SOURCE_DIR} ; ./prepareModules-glnx.sh; exit")
	else()
		message(FATAL_ERROR "Flutter activated for platform ${JVX_OS} which is not supported yet.")
	endif()
	message("flutter installation complete.")
endif()

# message(FATAL_ERROR "Check flutter installation here!")
