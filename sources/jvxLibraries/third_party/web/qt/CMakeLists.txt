set(PROJECT_NAME qt-aqt)
include(${JVX_CMAKE_DIR}/common_local_lib_head.cmake)

set(JVX_QT_VERSION "5.15.2")
if(${JVX_OS} MATCHES "windows")
	set(JVX_QT_ARCH_TOKEN "win64_msvc2019_64")
	set(JVX_QT_DIR_TOKEN "msvc2019_64")
	if(${JVX_PLATFORM} MATCHES "32bit")
		set(JVX_QT_ARCH_TOKEN "win32_msvc2019")
		set(JVX_QT_DIR_TOKEN "msvc2019")
	endif()
endif()
	
if(${JVX_OS} MATCHES "linux")
	set(JVX_QT_ARCH_TOKEN "gcc_64")
	set(JVX_QT_DIR_TOKEN "gcc_64")
endif()

set(QT_CHECK_DIR "${CMAKE_CURRENT_SOURCE_DIR}/qt/${JVX_QT_VERSION}/${JVX_QT_DIR_TOKEN}")
message("Check directory <${QT_CHECK_DIR}>")
if(NOT EXISTS ${QT_CHECK_DIR})	
	message("qt sub project not available. Starting script to download it.") 
	execute_process(COMMAND ${mysh} -c "cd ${CMAKE_CURRENT_SOURCE_DIR} ; ./prepareModules-${JVX_OS}.sh ${JVX_QT_VERSION} ${JVX_QT_ARCH_TOKEN}; exit")
	message("qt-aqt installation complete.")
endif()

if(NOT QT_INSTALL_PATH)
	set(QT_INSTALL_PATH "${CMAKE_CURRENT_SOURCE_DIR}/qt/${JVX_QT_VERSION}/${JVX_QT_DIR_TOKEN}" CACHE INTERNAL "Set QT_INSTALL_PATH to AQT installation if empty.")
endif()

